<html>
<head>
  <title>day01-网络编程概念</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2418"/>
<h1>day01-网络编程概念</h1>

<div>
<span><div>网络基础概念(服务器编程流程,客户端编程流程)</div><div>tcp通信-三次握手,四次挥手,</div><div>高并发服务器-多线程,多进程实现并发服务器</div><div>多路IO技术实现高并发服务器(select,poll,epoll )</div><div>线程池实现高并发服务器,udp编程</div><div>libevent 库</div><div>web服务器</div><div><br/></div><div><br/></div><div>1 mac地址  6个字节 - 48位</div><div>标识网卡的id,理论上这个id全球唯一</div><div>mac地址一般用来标识主机的id,这个id是物理地址,不会改变</div><div><img src="day01-网络编程概念_files/Image.png" type="image/png" data-filename="Image.png"/></div><div>2 IP地址 (ipv4) 4个字节  32位(常用)</div><div>ipv6   16 个字节  128位</div><div>IP地址是标识主机的id,这个id是虚拟,会改变</div><div><br/></div><div>一个IP将其分为子网id和主机id</div><div>子网id和主机id需要和子网掩码一起来看,</div><div>10.1.1.2</div><div>255.255.255.0</div><div><br/></div><div>ip中被连续的1覆盖的位就是子网id</div><div>ip中被连续的0覆盖的位就是主机id</div><div><img src="day01-网络编程概念_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div>ping: 这是一个命令 用来测试两台主机的网络连通性</div><div><br/></div><div>linux下设置ip命令</div><div><img src="day01-网络编程概念_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>ens33是网络名称</div><div>192.168.131.133  设置的ip</div><div>netmask 子网掩码  255.255.255.0</div><div><br/></div><div><br/></div><div>3 端口  port  </div><div>用来标识应用程序,一个端口只能用来标识一个应用程序,一个应用程序可以有多个端口</div><div>数据包到达主机之后,通过端口号确定这个数据包传输给哪一个应用 程序</div><div>端口  2个字节</div><div>知名端口: 0-1023</div><div>动态端口: 1024-&gt;  65535</div><div><br/></div><div>4 7层模型(OSI模型)</div><div>物理层: ,物理的接口的类型和标准,双绞线的标准, 传输速率等等 (模拟信号转数字信息)</div><div>数据链路层: 负责数据帧的收发  (一个数据包达到.数据链路层通过mac地址判断这个数据包是否是发送我我这台主机的)</div><div>网络层: 主要是给主机提供路径选择(通过IP地址)(一个数据包达到 ,通过目的ip地址判断这个数据包发送给这台主机)</div><div>传输层:  负责将数据递送到应用程序(通过端口)</div><div>会话层: 建立链接,</div><div>表示层: 解码 01010 - &gt;应用程序可以识别的</div><div>应用层: 应用程序</div><div><br/></div><div><br/></div><div>5 tcp/ip四次模型</div><div>链路层:  负责数据帧的收发,(mac  -  mac) 设备到设备</div><div>网络层: 负责路径的选择 (ip - ip) 主机到主机</div><div>传输层:  负责数据包到应用层的传输(port - port) 进程到进程</div><div>应用层:  应用程序 -应用程序</div><div><br/></div><div><br/></div><div>6 协议</div><div>协议: 规定了数据包传输的格式 和方式</div><div><img src="day01-网络编程概念_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div>应用层协议:  </div><div>    HTTP   超文本传输协议</div><div>    FTP::文件传输协议</div><div>    TFTP: 简单文件传输协议</div><div>    NFS: 网络文件系统</div><div>传输层协议:</div><div>    udp: 用户数据报协议</div><div>    tcp: 传输控制协议</div><div>网络层:</div><div>IP: 英特网互联协议</div><div>ICMP:   <font style="font-size: 12pt;"><span style="font-size: 12pt; font-family: Calibri, sans-serif;">Internet</span><span style="font-size: 12pt; font-family: 宋体;">控制</span><a href="http://baike.baidu.com/view/175122.htm" style="font-size: 12pt; color: windowtext; font-family: 宋体;">报文</a><span style="font-size: 12pt; font-family: 宋体;">协议</span></font></div><div>IGMP:<span style="font-family: Calibri, sans-serif;"> </span><span style="font-family: Calibri, sans-serif;">Internet</span> <span style="font-family: 宋体;">组管理协议(ping命令)</span></div><div>链路层:</div><div>ARP:  地址解析协议(通过ip找mac地址)</div><div>RARP: 反向地址解析协议(mac找ip)</div><div><br/></div><div><br/></div><div>7 数据包的组包和拆包</div><div><img src="day01-网络编程概念_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div>8 arp包的作用: 用过ip找mac地址</div><div><br/></div><div><img src="day01-网络编程概念_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>了解arp组包流程:</div><div><img src="day01-网络编程概念_files/Image [6].png" type="image/png" data-filename="Image.png"/></div><div>9 tcp  ip  udp协议</div><div><img src="day01-网络编程概念_files/Image [7].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>10  网络开发常用模式</div><div>B/S  bowser  /server浏览器和服务器</div><div>C/S  client /server  客户端和服务器</div><div><br/></div><div><br/></div><div>11 socket 套接字 </div><div>作用: 用来实现不同主机间进程间通信</div><div><br/></div><div><img src="day01-网络编程概念_files/Image [8].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div>12 字节序</div><div>注意:</div><div>如果是发送数据:需要将主机数据转成大端发送</div><div>如果是接收数据,需要将网络大端的数据转成主机可以识别的数据</div><div><img src="day01-网络编程概念_files/Image [9].png" type="image/png" data-filename="Image.png"/></div><div>13 字节转换函数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">#include &lt;arpa/inet.h&gt;</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">uint32_t htonl(uint32_t hostlong);</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-family: Monaco;"><span style="font-size: 16px;">主机转网络字节序  ,转4字节 </span></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">uint16_t htons(uint16_t hostshort);</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;"><span style="font-family: Monaco; font-size: 16px; color: rgb(51, 51, 51);">主机转网络字节序</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">  转2字节</span></font></span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">uint32_t ntohl(uint32_t netlong);</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-family: Monaco;"><span style="font-size: 16px;">网络转主机字节序  转4字节</span></font></div><div><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">uint16_t ntohs(uint16_t netshort);</font></span></div><div><span style="font-family: Monaco; font-size: 16px; color: rgb(51, 51, 51);">网络转主机字节序  转2字节</span></div></div><div><br/></div><div><img src="day01-网络编程概念_files/Image [10].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div>14 点分十进制串与整数(网络大端)转换</div><div>&quot;192.168.1.2&quot;</div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 12pt;">#include &lt;arpa/inet.h&gt;</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">int inet_pton(int af, const char *src, void *dst);</span></font></div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">功能: 将点分十进制串转32位大端整数</span></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">    参数: <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">int af</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">   协议(<span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">AF_INET</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">   </span>  AF_INET6)</span></span></font></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">            <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">const char *src</span><span style="font-family: Monaco; color: rgb(51, 51, 51);"> : 需要转换的点分十进制串的首地址</span></span></span></font></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);">            <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">void *dst</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">  : 转完之后存放的地址</span></span></span></span></font></div></div><div><font style="font-size: 12pt;"><span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco;color: rgb(51, 51, 51);-en-paragraph:true;">const char *inet_ntop(int af, const void *src, char *dst, socklen_t size);</span></font></div><div><span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">功能: 32位大端整数转<span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">点分十进制串</span></span></div><div><font face="Monaco"><span style="font-size: 16px;">参数: </span></font></div><div><font face="Monaco"><span style="font-size: 16px;">    <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">int af</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">   协议(</span><span style="font-family: Monaco; color: rgb(51, 51, 51); font-size: 12pt;">AF_INET</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">   </span><span style="font-family: Monaco; color: rgb(51, 51, 51);">  AF_INET6)</span></span></font></div><div><font face="Monaco"><span style="font-size: 16px;">    <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">void *src</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">  :需要转换的32位整数</span></span></font></div><div><span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">    char *dst: 转完之后点分十进制串存的地址</span></div><div><span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">    <span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">socklen_t size</span><span style="font-family: Monaco; color: rgb(51, 51, 51);"> : 存<span style="font-size: 12pt; font-family: Monaco; color: rgb(51, 51, 51);">点分十进制串</span><span style="font-family: Monaco; color: rgb(51, 51, 51);"> 内存大小</span></span></span></div><div><br/></div></div><div><br/></div><div><img src="day01-网络编程概念_files/Image [11].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>15 sockaddr 结构体</div><div><br/></div><div>网络通信需要解决三大问题</div><div>ip</div><div>port</div><div>协议</div><div><br/></div><div>ipv4套接字结构体</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">struct sockaddr_in {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">               sa_family_t    sin_family; /* address family: AF_INET */</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">               in_port_t      sin_port;   /* port in network byte order */</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">               struct in_addr sin_addr;   /* internet address */</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">           };</font></span></div><div><font style="font-size: 14pt;"><br style="font-family: Monaco; color: rgb(51, 51, 51);"/></font></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">           /* Internet address. */</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">           struct in_addr {</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">               uint32_t       s_addr;     /* address in network byte order */</font></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">     </font></span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      };</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div>ipv6套接字结构体</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">struct sockaddr_in6 {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">unsigned short int sin6_family;</span> <span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">      </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* AF_INET6 */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__be16 sin6_port;</span> <span style="mso-tab-count: 5; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">                </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* Transport layer port # */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__be32 sin6_flowinfo;</span> <span style="mso-tab-count: 4; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">            </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* IPv6 flow information */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">struct in6_addr sin6_addr;</span><span style="mso-tab-count: 3; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">        </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* IPv6 address */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__u32 sin6_scope_id;</span> <span style="mso-tab-count: 4; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">             </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* scope id (new in RFC2553) */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">};</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">struct in6_addr {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">union {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">       </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__u8 u6_addr8[16];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">       </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__be16 u6_addr16[8];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">       </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__be32 u6_addr32[4];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">} in6_u;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">#define s6_addr</span> <span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">      </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">in6_u.u6_addr8</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">#define s6_addr16</span> <span style="mso-tab-count: 2; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">    </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">in6_u.u6_addr16</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">#define s6_addr32</span><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;"> </span> <span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">  </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">in6_u.u6_addr32</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">};</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">#define UNIX_PATH_MAX 108</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">struct sockaddr_un {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">__kernel_sa_family_t sun_family;</span> <span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;"> </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">/* AF_UNIX */</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-tab-count: 1; font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">   </span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">char sun_path[UNIX_PATH_MAX]; /* pathname */</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">};</span></div></div><div>我们网络通信传参时可能穿ipv4 套接字结构体,也可能穿ipv6套接字结构体,所以为了统一标准,统统将iPv4和ipv6套接字结构体地址转成</div><div> 通用套接字结构体</div><div>struct sockaddr</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">send(struct sockaddr_in ,data);//ipv4</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">send(struct sockaddr_in6 ,data);//ipv6</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">fun(int  a)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">fun(char a)</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">fun(int *)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">fun(char *)</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">fun(void *)</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">struct sockaddr_in a;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//struct sockaddr 通用套接字结构体相当于void*</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">send((struct sockaddr *)&amp;a,data);</span></div></div><div><br/></div><div><br/></div><div>16  tcp的通信</div><div>tcp : 传输控制协议  面向连接 安全可靠,丢包重传</div><div>先连接   在使用  释放(抽象的打电话模型)</div><div>udp: 用户数据报协议  不面向连接(抽象的邮件模型)   不安全,丢包不重传</div><div>udp的效率高</div><div><br/></div><div>17 tcp的客户端和服务器通信流程</div><div><img src="day01-网络编程概念_files/Image [12].png" type="image/png" data-filename="Image.png" width="532"/></div><div>18  socket套接字创建</div><div><br/></div><div>#include &lt;sys/socket.h&gt;</div><div><br/></div><div>  int socket(int domain, int type, int protocol);</div><div>功能: 创建套接字</div><div>参数: </div><div>domain:协议  AF_INET  AF_INET6  </div><div>type: </div><div><span>    </span>SOCK_STREAM: 流式套接字,用于tcp通信</div><div><span>    SOCK_DGRAM: 报式套接字  ,用于udp通信</span><br/></div><div><span><span>protocol :  0     </span><br/></span></div><div>返回值: 创建的socket套接字(文件描述符)</div><div>19 connect 连接</div><div>#include &lt;sys/socket.h&gt;</div><div><br/></div><div>   int connect(int sockfd, const struct sockaddr *addr,</div><div>                   socklen_t addrlen);</div><div>功能: 连接服务器</div><div>参数:</div><div><span>    </span><span>    </span>sockfd: socket套接字 </div><div><span>   <span>    </span> const struct sockaddr *addr    : ipv4套接字结构体的地址,转成struct sockaddr *</span><br/></div><div><span>    </span><span>    </span> socklen_t addrlen: ipv4结构体大小</div><div><br/></div><div>20 tcp客户端通信流程</div><div>1 创建套接字 socket</div><div>2 连接服务器 connect</div><div>3 收发数据  read write</div><div>4 关闭套接字 close</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 